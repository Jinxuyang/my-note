---
title: 正则表达式
date: 2020-04-23 23:44:33
tags:
	- 正则
	- 学习笔记
categories: 
	- 工具
---

[TOC]

```javascript
var string = 'a1b2c3';
string = string.replace(/[abc]/g, 'X');
console.log(string);
```

<!--more-->

在JavaScript中创建一个正则表达式对象

```javascript
var a = new RegExp();
var b = /表达式/属性(g/i/m)
```

正则表达式由两种基本字符类型组成

- 原义文本字符

  - 代表要查找文本的原本意思的字符

- 元字符

  - 在正则表达式中有特殊含义的非字母字符

    ```
    *+?$^.|\()[]{}
	  ```



### 字符类

- 一般情况下正则表达式一个字符对应字符串一个字符

- 要匹配某类字符使用`[]`构建一个类
  - 类指符合某些特征的对象
  - `[abc]`意思就是把abc归为一类，匹配这类字符
  - `[^abc]`就是匹配出除abc以外的字符

### 范围类

- 可以使用`[a-z]`表示匹配a到z的任意字符
- `[a-zA-Z]`表示匹配a到z和A到Z的任意字符

### 预定义类

| 字符 | 等价类          | 含义                           |
| ---- | --------------- | ------------------------------ |
| .    | [^\r\n]         | 除了回车、换行符之外的其他字符 |
| \d   | [0-9]           | 数字字符                       |
| \D   | [^0-9]          | 非数字字符                     |
| \s   | [\t\n\x0B\f\r]  | 空白符                         |
| \S   | [^\t\n\x0B\f\r] | 非空白符                       |
| \w   | [a-zA-Z_0-9]    | 单词字符(字母、数字、下划线)   |
| \W   | [^a-zA-Z_0-9]   | 非单词字符                     |

### 边界

- `\b`单词边界,`\B`非单词边界
- `^`表示以...开始，`$`表示以...结束

### 量词

| 字符  | 含义            |
| ----- | --------------- |
| ?     | 0或1 次         |
| +     | ≥1 次           |
| *     | ≥0 次（任意次） |
| {n}   | n 次            |
| {n,m} | n到m 次         |
| {n,}  | ≥n 次           |

#### 贪婪模式

尽可能多的匹配

例如有一个字符串12345678

`\d{3,6}`这样进行匹配的话结果是123456，并非123或1234或....

#### 非贪婪模式

尽量少的匹配，一旦匹配成功就不再继续尝试

`\d{3,6}`结果是123，456

**JS默认使用贪婪模式，想使用非贪婪模式在量词后加上`?`即可**

### 分组

使用`()`进行分组

假如你想匹配一个小写字母加数字连续出现3次就可以这样写`([a-z]\d){3}`,而这样是不行的`[a-z]\d{3}`这样结果是匹配一个字母加三个数字

#### 或

`|`表示或

假如想匹配123345和124445就可以这样写`12(33|44)45`

#### 反向引用

假如你想把2020-4-24变为24/4/2020就可以这样写`(\d{4})-(\d{2}|\d{1})-(\d{2}|\d{1})`

然后使用`$1$2$3`捕获分组写成`$3/$2/$1`

#### 忽略分组

假如你不想捕获某个分组就可以

这样`(\d{4})-(\d{2}|\d{1})-(?:\d{2}|\d{1})`这样就匹配不到日期了,$3就是没内容的

### 前瞻&后顾

文本头叫前文本尾部叫后

前瞻就是在正则表达式匹配带规则时，向前检查是否符合断言，后顾与之相反

**JS不支持后顾**

既要符合exp正则，又要满足断言要求

**正向/肯定 匹配**：符合特定断言
**负向/否定 匹配**：不符合特定断言

| 名称     | 正则写法      | 含义                            |
| -------- | ------------- | ------------------------------- |
| 正向前瞻 | exp(?=assert) | 符合exp正则，且符合设置的断言   |
| 负向前瞻 | exp(?!assert) | 符合exp正则，且不符合设置的断言 |

**断言部分只作为约束条件而存在，并不会参与字符本身的匹配和替换，匹配字符的是exp正则部分**

假如你想匹配一个字母后加一个数字，但是只替换字母就可以

这样`a1aaa3`一个字符串`[a-z](?=\d)`

### RegExp对象属性

| 名称       | 含义                                                         |
| ---------- | ------------------------------------------------------------ |
| global     | `g`：全文搜索，默认false                                     |
| ignoreCase | `i`：大小写敏感，默认false                                   |
| multiline  | `m`：多行搜索，默认false                                     |
| lastIndex  | 下次匹配的起始位置 该属性只有设置标志`g`才能使用，实现遍历检索匹配 |
| source     | 正则的文本字符串（正则主体）                                 |

gim这三个对象都是只读的

### RegExp对象方法

#### test()方法

```javascript
reg1.test(字符串)
```

返回true或false，测试字符串参数中是否存在所匹配正则的字符串

非全局调用

默认从字符串第一个字符出发，找到第一个符合条件的子字符串就停止

全局调用

如果reg1标志g的话，lastIndex就会起作用，可以通过不断调用reg1.test()对字符串进行遍历，找出所有符合条件的子字符串

每调用一次reg1.test()就会使lastIndex移动到上一次找出的字符串的最后一个字符的下一个字符上，当找不到符合条件的子字符串时，会将lastIndex重置为0

![](https://upload-images.jianshu.io/upload_images/4866277-b79894ead9358586.png?imageMogr2/auto-orient/strip|imageView2/2/w/553/format/webp)

#### exec()方法

```javascript
reg1.exec(字符串);
```

全局调用

返回一个数组，包含额外的属性 `index` 和 `input`，找不到返回null

```javascript
var re = /quick\s(brown).+?(jumps)/ig;
var result = re.exec('The Quick Brown Fox Jumps Over The Lazy Dog');
```

| 属性/索引         |描述                                | 例子                                                |
| ---------------- | ------------------  ------------- | ------------------------------------------------- |
|`[0]`             |匹配的全部字符串                      |`Quick Brown Fox Jumps`                             |
| `[1], ...[*n* ]` |括号中的分组捕获                      |`[1] = Brown[2] = Jumps`                           |
|`index`           |匹配到的字符位于原始字符串的基于0的索引值 | `4`                                                |
| `input`          |原始字符串                           | `The Quick Brown Fox Jumps Over The Lazy Dog` |

非全局调用

与test()方法类似

